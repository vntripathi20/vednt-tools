<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Color Picker ‚Äì VTools</title>
  <meta name="description" content="Advanced color picker with color conversion, palettes, and more." />
  <link rel="stylesheet" href="tools.css" />
  <style>
    /* Color Picker Specific Styles */
    .color-preview {
      width: 100%;
      height: 150px;
      border-radius: 8px;
      border: 2px solid #334155;
      margin-bottom: 20px;
      cursor: pointer;
      transition: 0.3s ease;
    }

    .color-preview:hover {
      transform: scale(0.98);
    }

    .color-value {
      display: flex;
      align-items: center;
      gap: 10px;
      background: #0f172a;
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #334155;
      font-family: 'Courier New', monospace;
      font-size: 13px;
    }

    .color-value-label {
      color: #94a3b8;
      font-size: 12px;
      min-width: 40px;
    }

    .harmony-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .harmony-color {
      text-align: center;
      padding: 15px;
      background: #0f172a;
      border-radius: 8px;
      border: 1px solid #334155;
      cursor: pointer;
      transition: 0.3s ease;
    }

    .harmony-color:hover {
      border-color: #38bdf8;
    }

    .harmony-preview {
      width: 100%;
      height: 60px;
      border-radius: 6px;
      margin-bottom: 8px;
      border: 1px solid #334155;
    }

    .harmony-name {
      font-size: 12px;
      color: #cbd5e1;
      margin-bottom: 5px;
    }

    .harmony-value {
      font-family: 'Courier New', monospace;
      font-size: 11px;
      color: #94a3b8;
      word-break: break-all;
    }

    .gradient-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .gradient-item {
      height: 100px;
      border-radius: 8px;
      cursor: pointer;
      border: 2px solid transparent;
      transition: 0.3s ease;
    }

    .gradient-item:hover {
      border-color: #38bdf8;
    }
  </style>
  <script src="../analytics.js"></script>
</head>

<body>
  <header class="navbar">
    <a class="logo" href="../index.html">V<span>Tools</span></a>
    <nav>
      <a href="../index.html" class="back-link">‚Üê Back to Tools</a>
    </nav>
  </header>

  <div class="container">
    <div class="header">
      <h1>üé® Advanced Color Picker</h1>
      <p>Pick, convert, and explore colors with advanced features and harmonies.</p>
    </div>

    <div class="main-grid">
      <!-- Color Input Card -->
      <div class="card">
        <h2><span class="emoji">üéØ</span> Color Input</h2>
        
        <div class="input-group">
          <label for="colorInput">Pick a Color</label>
          <input type="color" id="colorInput" value="#38bdf8">
        </div>

        <div class="color-preview" id="colorPreview"></div>

        <div class="input-group">
          <label for="hexInput">HEX Code</label>
          <div style="display: flex; gap: 10px;">
            <input type="text" id="hexInput" placeholder="#000000">
            <button class="copy-btn" onclick="copyToClipboard('hexInput')" title="Copy HEX">üìã</button>
          </div>
        </div>

        <div class="grid-2">
          <div class="input-group">
            <label for="rgbInput">RGB</label>
            <div style="display: flex; gap: 10px;">
              <input type="text" id="rgbInput" placeholder="0, 0, 0" readonly>
              <button class="copy-btn" onclick="copyToClipboard('rgbInput')" title="Copy RGB">üìã</button>
            </div>
          </div>

          <div class="input-group">
            <label for="hslInput">HSL</label>
            <div style="display: flex; gap: 10px;">
              <input type="text" id="hslInput" placeholder="0, 0%, 0%" readonly>
              <button class="copy-btn" onclick="copyToClipboard('hslInput')" title="Copy HSL">üìã</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Adjustments Card -->
      <div class="card">
        <h2><span class="emoji">üéöÔ∏è</span> Adjustments</h2>

        <div class="slider-group">
          <div class="slider-label">
            <label for="lightnessSlider">Lightness</label>
            <span class="slider-value" id="lightnessValue">50%</span>
          </div>
          <input type="range" id="lightnessSlider" min="0" max="100" value="50">
        </div>

        <div class="slider-group">
          <div class="slider-label">
            <label for="saturationSlider">Saturation</label>
            <span class="slider-value" id="saturationValue">100%</span>
          </div>
          <input type="range" id="saturationSlider" min="0" max="100" value="100">
        </div>

        <div class="slider-group">
          <div class="slider-label">
            <label for="hueSlider">Hue</label>
            <span class="slider-value" id="hueValue">0¬∞</span>
          </div>
          <input type="range" id="hueSlider" min="0" max="360" value="0">
        </div>

        <div class="grid-2">
          <div class="input-group">
            <label for="brightnessSlider">Brightness</label>
            <input type="range" id="brightnessSlider" min="-100" max="100" value="0">
          </div>

          <div class="input-group">
            <label for="contrastSlider">Contrast</label>
            <input type="range" id="contrastSlider" min="-100" max="100" value="0">
          </div>
        </div>
      </div>
    </div>

    <!-- Color Harmonies -->
    <div class="card" style="margin-bottom: 30px;">
      <h2><span class="emoji">üåà</span> Color Harmonies</h2>
      <div class="harmony-grid" id="harmoniesGrid"></div>
    </div>

    <!-- Gradient Generator -->
    <div class="card" style="margin-bottom: 30px;">
      <h2><span class="emoji">‚ú®</span> Gradient Presets</h2>
      <div class="gradient-grid" id="gradientsGrid"></div>
      <div class="input-group">
        <label for="gradientOutput">Gradient CSS</label>
        <div style="display: flex; gap: 10px;">
          <input type="text" id="gradientOutput" placeholder="linear-gradient(...)" readonly>
          <button class="copy-btn" onclick="copyToClipboard('gradientOutput')" title="Copy Gradient">üìã</button>
        </div>
      </div>
    </div>

    <!-- Color Information and History -->
    <div class="main-grid">
      <!-- Color Info -->
      <div class="card">
        <h2><span class="emoji">‚ÑπÔ∏è</span> Color Information</h2>
        
        <div class="color-value">
          <span class="color-value-label">R:</span>
          <span id="rValue">56</span>
        </div>
        
        <div class="color-value">
          <span class="color-value-label">G:</span>
          <span id="gValue">189</span>
        </div>
        
        <div class="color-value">
          <span class="color-value-label">B:</span>
          <span id="bValue">248</span>
        </div>

        <div class="color-value">
          <span class="color-value-label">H:</span>
          <span id="hValue">200¬∞</span>
        </div>

        <div class="color-value">
          <span class="color-value-label">S:</span>
          <span id="sValue">98%</span>
        </div>

        <div class="color-value">
          <span class="color-value-label">L:</span>
          <span id="lValue">59%</span>
        </div>
      </div>

      <!-- History -->
      <div class="card">
        <h2><span class="emoji">‚è±Ô∏è</span> Color History</h2>
        <div class="history-grid" id="historyGrid"></div>
        <button class="clear-history-btn" onclick="clearHistory()">Clear History</button>
      </div>
    </div>
  </div>

  <footer>
    <p>¬© 2026 Ved Narayan Tripathi ‚Ä¢ Color Picker Tool ‚Ä¢ <a href="https://vednt.com" style="color: #38bdf8; text-decoration: none;">Ved's Site</a></p>
  </footer>

  <script>
    // Get all elements
    const colorInput = document.getElementById('colorInput');
    const colorPreview = document.getElementById('colorPreview');
    const hexInput = document.getElementById('hexInput');
    const rgbInput = document.getElementById('rgbInput');
    const hslInput = document.getElementById('hslInput');
    const lightnessSlider = document.getElementById('lightnessSlider');
    const saturationSlider = document.getElementById('saturationSlider');
    const hueSlider = document.getElementById('hueSlider');
    const brightnessSlider = document.getElementById('brightnessSlider');
    const contrastSlider = document.getElementById('contrastSlider');
    const harmoniesGrid = document.getElementById('harmoniesGrid');
    const historyGrid = document.getElementById('historyGrid');
    const gradientsGrid = document.getElementById('gradientsGrid');
    const gradientOutput = document.getElementById('gradientOutput');

    // Local storage for history
    let colorHistory = JSON.parse(localStorage.getItem('colorHistory')) || [];

    // Initialize on page load
    window.addEventListener('load', () => {
      updateColor('#38bdf8');
      initializeGradients();
      updateHistory();
    });

    // Event listeners
    colorInput.addEventListener('input', (e) => {
      updateColor(e.target.value);
      addToHistory(e.target.value);
    });

    hexInput.addEventListener('input', (e) => {
      let hex = e.target.value;
      if (!hex.startsWith('#')) hex = '#' + hex;
      if (isValidHex(hex)) {
        colorInput.value = hex;
        updateColor(hex);
        addToHistory(hex);
      }
    });

    lightnessSlider.addEventListener('input', updateFromSliders);
    saturationSlider.addEventListener('input', updateFromSliders);
    hueSlider.addEventListener('input', updateFromSliders);
    brightnessSlider.addEventListener('input', updateFromSliders);
    contrastSlider.addEventListener('input', updateFromSliders);

    // Main color update function
    function updateColor(hex) {
      colorInput.value = hex;
      hexInput.value = hex.toUpperCase();
      colorPreview.style.backgroundColor = hex;

      // Convert to RGB
      const rgb = hexToRgb(hex);
      rgbInput.value = `${rgb.r}, ${rgb.g}, ${rgb.b}`;
      
      // Convert to HSL
      const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
      hslInput.value = `${Math.round(hsl.h)}, ${Math.round(hsl.s)}%, ${Math.round(hsl.l)}%`;

      // Update sliders to match
      hueSlider.value = Math.round(hsl.h);
      saturationSlider.value = Math.round(hsl.s);
      lightnessSlider.value = Math.round(hsl.l);

      // Update values display
      document.getElementById('rValue').textContent = rgb.r;
      document.getElementById('gValue').textContent = rgb.g;
      document.getElementById('bValue').textContent = rgb.b;
      document.getElementById('hValue').textContent = Math.round(hsl.h) + '¬∞';
      document.getElementById('sValue').textContent = Math.round(hsl.s) + '%';
      document.getElementById('lValue').textContent = Math.round(hsl.l) + '%';

      // Update harmonies
      updateHarmonies(hex);

      // Update sliders display values
      document.getElementById('lightnessValue').textContent = lightnessSlider.value + '%';
      document.getElementById('saturationValue').textContent = saturationSlider.value + '%';
      document.getElementById('hueValue').textContent = hueSlider.value + '¬∞';
    }

    function updateFromSliders() {
      const h = parseInt(hueSlider.value);
      const s = parseInt(saturationSlider.value);
      const l = parseInt(lightnessSlider.value);
      
      document.getElementById('lightnessValue').textContent = l + '%';
      document.getElementById('saturationValue').textContent = s + '%';
      document.getElementById('hueValue').textContent = h + '¬∞';

      const hex = hslToHex(h, s, l);
      updateColor(hex);
      addToHistory(hex);
    }

    // Color conversion functions
    function hexToRgb(hex) {
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : { r: 0, g: 0, b: 0 };
    }

    function rgbToHex(r, g, b) {
      return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
    }

    function rgbToHsl(r, g, b) {
      r /= 255;
      g /= 255;
      b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0;
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }
      return { h: h * 360, s: s * 100, l: l * 100 };
    }

    function hslToRgb(h, s, l) {
      h = h / 360;
      s = s / 100;
      l = l / 100;
      let r, g, b;

      if (s === 0) {
        r = g = b = l;
      } else {
        const hue2rgb = (p, q, t) => {
          if (t < 0) t += 1;
          if (t > 1) t -= 1;
          if (t < 1/6) return p + (q - p) * 6 * t;
          if (t < 1/2) return q;
          if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
          return p;
        };
        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
      }
      return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255) };
    }

    function hslToHex(h, s, l) {
      const rgb = hslToRgb(h, s, l);
      return rgbToHex(rgb.r, rgb.g, rgb.b);
    }

    function isValidHex(hex) {
      return /^#[0-9A-F]{6}$/i.test(hex);
    }

    // Update color harmonies
    function updateHarmonies(hex) {
      const rgb = hexToRgb(hex);
      const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
      const h = hsl.h;
      const s = hsl.s;
      const l = hsl.l;

      const harmonies = [
        { name: 'Original', h: h },
        { name: 'Complementary', h: (h + 180) % 360 },
        { name: 'Triadic 1', h: (h + 120) % 360 },
        { name: 'Triadic 2', h: (h + 240) % 360 },
        { name: 'Analogous 1', h: (h + 30) % 360 },
        { name: 'Analogous 2', h: (h - 30 + 360) % 360 },
        { name: 'Split 1', h: (h + 150) % 360 },
        { name: 'Split 2', h: (h + 210) % 360 },
      ];

      harmoniesGrid.innerHTML = harmonies.map(harmony => {
        const harmonyHex = hslToHex(harmony.h, s, l);
        return `
          <div class="harmony-color" onclick="updateColor('${harmonyHex}'); addToHistory('${harmonyHex}')">
            <div class="harmony-preview" style="background-color: ${harmonyHex}"></div>
            <div class="harmony-name">${harmony.name}</div>
            <div class="harmony-value">${harmonyHex}</div>
          </div>
        `;
      }).join('');
    }

    // Initialize gradients
    function initializeGradients() {
      const gradients = [
        { name: 'Sunset', colors: ['#FF6B6B', '#FFE66D', '#FF6B6B'] },
        { name: 'Ocean', colors: ['#0072B2', '#56C5FF', '#00B4D8'] },
        { name: 'Forest', colors: ['#1B4332', '#40916C', '#95D5B2'] },
        { name: 'Purple', colors: ['#6A4C93', '#9D84B7', '#A090C0'] },
        { name: 'Coral', colors: ['#FF6B9D', '#FFC75F', '#A8E6CF'] },
        { name: 'Berry', colors: ['#522B5B', '#CD7F32', '#E6B8D7'] },
      ];

      gradientsGrid.innerHTML = gradients.map((grad, index) => {
        const gradientStyle = `linear-gradient(135deg, ${grad.colors.join(', ')})`;
        return `
          <div class="gradient-item" style="background: ${gradientStyle};" onclick="setGradient('${gradientStyle}')"></div>
        `;
      }).join('');
    }

    function setGradient(gradient) {
      gradientOutput.value = gradient;
    }

    // History management
    function addToHistory(hex) {
      if (hex && isValidHex(hex)) {
        colorHistory = colorHistory.filter(c => c !== hex.toUpperCase());
        colorHistory.unshift(hex.toUpperCase());
        if (colorHistory.length > 12) colorHistory.pop();
        localStorage.setItem('colorHistory', JSON.stringify(colorHistory));
        updateHistory();
      }
    }

    function updateHistory() {
      historyGrid.innerHTML = colorHistory.map(color => 
        `<div class="history-item" style="background-color: ${color};" onclick="updateColor('${color}'); addToHistory('${color}')" title="${color}"></div>`
      ).join('');
    }

    function clearHistory() {
      if (confirm('Clear all color history?')) {
        colorHistory = [];
        localStorage.setItem('colorHistory', JSON.stringify(colorHistory));
        updateHistory();
      }
    }

    // Copy to clipboard
    function copyToClipboard(elementId) {
      const element = document.getElementById(elementId);
      const text = element.value;
      
      navigator.clipboard.writeText(text).then(() => {
        showCopyFeedback();
      }).catch(err => {
        console.error('Failed to copy:', err);
      });
    }

    function showCopyFeedback() {
      const feedback = document.createElement('div');
      feedback.className = 'copy-feedback';
      feedback.textContent = '‚úì Copied to clipboard!';
      document.body.appendChild(feedback);
      
      setTimeout(() => {
        feedback.remove();
      }, 2000);
    }
  </script>
</body>
</html>
