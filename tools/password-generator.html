<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Password Generator ‚Äì VTools</title>
  <meta name="description" content="Secure password generator with customizable options and strength calculator." />
  <link rel="stylesheet" href="tools.css" />
</head>

<body>
  <header class="navbar">
    <a class="logo" href="../index.html">V<span>Tools</span></a>
    <nav>
      <a href="../index.html" class="back-link">‚Üê Back to Tools</a>
    </nav>
  </header>

  <div class="container">
    <div class="header">
      <h1>üîê Password Generator</h1>
      <p>Create strong, secure passwords with customizable options and real-time strength analysis.</p>
    </div>

    <div class="main-grid">
      <!-- Password Display Section -->
      <div class="card">
        <h2><span class="emoji">üìã</span> Generated Password</h2>
        
        <div style="position: relative; margin-bottom: 20px;">
          <input 
            type="password" 
            id="passwordDisplay" 
            readonly 
            value="Tr0p!c@lSunset42"
            style="font-size: 16px; letter-spacing: 2px; font-weight: 600; font-family: 'Courier New', monospace;"
          >
          <button 
            class="copy-btn" 
            onclick="togglePasswordVisibility()" 
            style="position: absolute; right: 45px; top: 10px; font-size: 18px;"
            title="Toggle visibility"
          >üëÅÔ∏è</button>
          <button 
            class="copy-btn" 
            onclick="copyPassword()" 
            style="position: absolute; right: 12px; top: 10px; font-size: 18px;"
            title="Copy to clipboard"
          >üìã</button>
        </div>

        <!-- Strength Indicator -->
        <div style="margin-bottom: 20px;">
          <label style="margin-bottom: 10px; display: block;">Password Strength</label>
          <div class="strength-meter">
            <div class="strength-bar strength-strong" style="width: 85%;" id="strengthBar"></div>
          </div>
          <span class="strength-text strength-strong-text" id="strengthText">Strong</span>
        </div>

        <!-- Quick Actions -->
        <div class="button-group">
          <button class="button-full" onclick="generatePassword()">üîÑ Generate New</button>
          <button class="button-full button-secondary" onclick="downloadPassword()">‚¨áÔ∏è Download</button>
        </div>

        <div class="info-box">
          <strong>üí° Tip:</strong> Click the eye icon to show/hide the password. Use the visibility toggle when entering passwords in shared environments.
        </div>
      </div>

      <!-- Password Options -->
      <div class="card">
        <h2><span class="emoji">‚öôÔ∏è</span> Password Options</h2>

        <div class="slider-group">
          <div class="slider-label">
            <label for="lengthSlider">Password Length</label>
            <span class="slider-value" id="lengthValue">16</span>
          </div>
          <input type="range" id="lengthSlider" min="4" max="50" value="16">
        </div>

        <div class="info-box">
          <strong>Recommended:</strong> 12-16 characters for strong security
        </div>

        <div class="input-group">
          <label>Character Types</label>
          <div class="checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="uppercase" checked onchange="generatePassword()">
              <label for="uppercase">Uppercase (A-Z)</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="lowercase" checked onchange="generatePassword()">
              <label for="lowercase">Lowercase (a-z)</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="numbers" checked onchange="generatePassword()">
              <label for="numbers">Numbers (0-9)</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="symbols" checked onchange="generatePassword()">
              <label for="symbols">Symbols (!@#$%...)</label>
            </div>
          </div>
        </div>

        <div class="input-group">
          <label for="symbolsInput">Custom Symbols</label>
          <input 
            type="text" 
            id="symbolsInput" 
            value="!@#$%^&*()_+-=[]{}|;:,.<>?" 
            placeholder="Enter custom symbols"
            onchange="generatePassword()"
          >
        </div>

        <button class="button-full" onclick="resetOptions()">‚Ü∫ Reset to Defaults</button>
      </div>
    </div>

    <!-- Advanced Options -->
    <div class="card" style="margin-bottom: 30px;">
      <h2><span class="emoji">üéØ</span> Advanced Options</h2>

      <div class="grid-3">
        <div class="input-group">
          <label for="excludeAmbiguous">
            <input type="checkbox" id="excludeAmbiguous" onchange="generatePassword()">
            <span style="margin-left: 8px;">Exclude Ambiguous (il1Lo0O)</span>
          </label>
        </div>

        <div class="input-group">
          <label for="requireAllTypes">
            <input type="checkbox" id="requireAllTypes" checked onchange="generatePassword()">
            <span style="margin-left: 8px;">Require All Selected Types</span>
          </label>
        </div>

        <div class="input-group">
          <label for="startsWithLetter">
            <input type="checkbox" id="startsWithLetter" onchange="generatePassword()">
            <span style="margin-left: 8px;">Start with Letter</span>
          </label>
        </div>
      </div>

      <div class="grid-2" style="margin-top: 20px;">
        <div class="input-group">
          <label for="excludeCharacters">Characters to Exclude</label>
          <input 
            type="text" 
            id="excludeCharacters" 
            placeholder="e.g., abc123"
            onchange="generatePassword()"
          >
        </div>

        <div class="input-group">
          <label for="requireCharacters">Characters to Include</label>
          <input 
            type="text" 
            id="requireCharacters" 
            placeholder="e.g., @#$"
            onchange="generatePassword()"
          >
        </div>
      </div>
    </div>

    <!-- Password Details -->
    <div class="main-grid">
      <div class="card">
        <h2><span class="emoji">üìä</span> Password Analysis</h2>

        <div class="value-display">
          <span class="value-label">Length:</span>
          <span id="analysisLength">16</span>
        </div>

        <div class="value-display">
          <span class="value-label">Entropy:</span>
          <span id="analysisEntropy">~100 bits</span>
        </div>

        <div class="value-display">
          <span class="value-label">Unique Chars:</span>
          <span id="analysisUnique">94</span>
        </div>

        <div class="value-display">
          <span class="value-label">Crack Time:</span>
          <span id="analysisCrackTime">~2 million years</span>
        </div>

        <div class="info-box" style="margin-top: 20px;">
          <strong>üìà Entropy Explained:</strong> Higher entropy means more randomness and security. Each additional character exponentially increases crack resistance.
        </div>
      </div>

      <!-- Password History -->
      <div class="card">
        <h2><span class="emoji">‚è±Ô∏è</span> Password History</h2>
        
        <div id="historyList" style="max-height: 300px; overflow-y: auto;">
          <p style="text-align: center; color: #94a3b8; padding: 20px;">No passwords generated yet</p>
        </div>

        <button class="button-full button-secondary" onclick="clearHistory()" style="margin-top: 15px;">üóëÔ∏è Clear History</button>
      </div>
    </div>

    <!-- Batch Generator -->
    <div class="card" style="margin-bottom: 30px;">
      <h2><span class="emoji">üì¶</span> Batch Password Generator</h2>

      <div class="grid-2">
        <div class="input-group">
          <label for="batchCount">Number of Passwords</label>
          <input type="number" id="batchCount" min="1" max="100" value="5">
        </div>

        <div class="input-group">
          <label></label>
          <button class="button-full" onclick="generateBatch()">Generate Batch</button>
        </div>
      </div>

      <div class="input-group">
        <label for="batchOutput">Generated Passwords</label>
        <textarea 
          id="batchOutput" 
          placeholder="Generated passwords will appear here"
          readonly
          style="font-family: 'Courier New', monospace; font-size: 13px;"
        ></textarea>
      </div>

      <button class="button-full button-secondary" onclick="copyBatchPasswords()" style="margin-bottom: 10px;">üìã Copy All</button>
      <button class="button-full button-secondary" onclick="downloadBatchPasswords()">‚¨áÔ∏è Download as Text</button>
    </div>

    <!-- Best Practices -->
    <div class="card" style="margin-bottom: 30px;">
      <h2><span class="emoji">‚úÖ</span> Best Practices</h2>

      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div>
          <h3 style="color: #38bdf8; margin-bottom: 10px;">üîí Security Tips</h3>
          <ul style="color: #cbd5e1; font-size: 13px; line-height: 1.8;">
            <li>Use 12-16 character minimum</li>
            <li>Include uppercase, lowercase, numbers & symbols</li>
            <li>Avoid dictionary words</li>
            <li>Use unique passwords per account</li>
          </ul>
        </div>

        <div>
          <h3 style="color: #38bdf8; margin-bottom: 10px;">üíæ Storage Tips</h3>
          <ul style="color: #cbd5e1; font-size: 13px; line-height: 1.8;">
            <li>Use a password manager</li>
            <li>Never share passwords via email</li>
            <li>Don't reuse passwords</li>
            <li>Store in encrypted vault</li>
          </ul>
        </div>

        <div>
          <h3 style="color: #38bdf8; margin-bottom: 10px;">üõ°Ô∏è Protection Tips</h3>
          <ul style="color: #cbd5e1; font-size: 13px; line-height: 1.8;">
            <li>Enable 2FA/MFA when available</li>
            <li>Update passwords regularly</li>
            <li>Check for breaches (haveibeenpwned.com)</li>
            <li>Use different passwords for critical accounts</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <footer>
    <p>¬© 2026 Ved Narayan Tripathi ‚Ä¢ Password Generator Tool ‚Ä¢ <a href="https://vednt.com">Ved's Site</a></p>
  </footer>

  <script>
    // DOM Elements
    const passwordDisplay = document.getElementById('passwordDisplay');
    const lengthSlider = document.getElementById('lengthSlider');
    const lengthValue = document.getElementById('lengthValue');
    const uppercase = document.getElementById('uppercase');
    const lowercase = document.getElementById('lowercase');
    const numbers = document.getElementById('numbers');
    const symbols = document.getElementById('symbols');
    const symbolsInput = document.getElementById('symbolsInput');
    const strengthBar = document.getElementById('strengthBar');
    const strengthText = document.getElementById('strengthText');
    const historyList = document.getElementById('historyList');
    const batchOutput = document.getElementById('batchOutput');

    // Character sets
    const UPPERCASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const LOWERCASE_CHARS = 'abcdefghijklmnopqrstuvwxyz';
    const NUMBER_CHARS = '0123456789';
    const SYMBOL_CHARS = '!@#$%^&*()_+-=[]{}|;:,.<>?';
    const AMBIGUOUS_CHARS = 'il1Lo0O';

    // Local storage
    let passwordHistory = JSON.parse(localStorage.getItem('passwordHistory')) || [];

    // Initialize
    window.addEventListener('load', () => {
      generatePassword();
      updateHistoryDisplay();
      lengthSlider.addEventListener('input', () => {
        lengthValue.textContent = lengthSlider.value;
        generatePassword();
      });
    });

    // Generate password
    function generatePassword() {
      let chars = '';
      let requirements = [];

      // Build character set
      if (uppercase.checked) {
        chars += UPPERCASE_CHARS;
        requirements.push(UPPERCASE_CHARS);
      }
      if (lowercase.checked) {
        chars += LOWERCASE_CHARS;
        requirements.push(LOWERCASE_CHARS);
      }
      if (numbers.checked) {
        chars += NUMBER_CHARS;
        requirements.push(NUMBER_CHARS);
      }
      if (symbols.checked) {
        const customSymbols = symbolsInput.value || SYMBOL_CHARS;
        chars += customSymbols;
        requirements.push(customSymbols);
      }

      // Get excluded characters
      const excludeChars = document.getElementById('excludeCharacters').value;
      const requireChars = document.getElementById('requireCharacters').value;
      const excludeAmbiguous = document.getElementById('excludeAmbiguous').checked;

      // Remove excluded characters
      if (excludeAmbiguous) {
        chars = chars.split('').filter(c => !AMBIGUOUS_CHARS.includes(c)).join('');
      }
      if (excludeChars) {
        chars = chars.split('').filter(c => !excludeChars.includes(c)).join('');
      }

      // Validate we have characters to use
      if (chars.length === 0) {
        passwordDisplay.value = 'Select character types';
        return;
      }

      const length = parseInt(lengthSlider.value);
      let password = '';

      // If require all types is enabled, ensure at least one from each type
      if (document.getElementById('requireAllTypes').checked && requirements.length > 1) {
        // Add one character from each requirement
        for (let req of requirements) {
          let validReq = req;
          if (excludeAmbiguous) {
            validReq = validReq.split('').filter(c => !AMBIGUOUS_CHARS.includes(c)).join('');
          }
          if (excludeChars) {
            validReq = validReq.split('').filter(c => !excludeChars.includes(c)).join('');
          }
          if (validReq.length > 0) {
            password += validReq.charAt(Math.floor(Math.random() * validReq.length));
          }
        }

        // Fill remaining length with random characters
        while (password.length < length) {
          password += chars.charAt(Math.floor(Math.random() * chars.length));
        }

        // Shuffle password
        password = password.split('').sort(() => Math.random() - 0.5).join('');
      } else {
        // Generate random password
        for (let i = 0; i < length; i++) {
          password += chars.charAt(Math.floor(Math.random() * chars.length));
        }
      }

      // If starts with letter is enabled
      if (document.getElementById('startsWithLetter').checked) {
        const letterChars = UPPERCASE_CHARS + LOWERCASE_CHARS;
        const firstChar = letterChars.charAt(Math.floor(Math.random() * letterChars.length));
        password = firstChar + password.slice(1);
      }

      // Add required characters
      if (requireChars) {
        for (let char of requireChars) {
          const index = Math.floor(Math.random() * password.length);
          password = password.slice(0, index) + char + password.slice(index + 1);
        }
      }

      passwordDisplay.value = password;
      updateStrength(password);
      updateAnalysis(password, chars);
      addToHistory(password);
    }

    // Update password strength
    function updateStrength(password) {
      let strength = 0;
      let feedback = 'Weak';

      if (password.length >= 8) strength += 20;
      if (password.length >= 12) strength += 20;
      if (password.length >= 16) strength += 20;

      if (/[A-Z]/.test(password)) strength += 10;
      if (/[a-z]/.test(password)) strength += 10;
      if (/[0-9]/.test(password)) strength += 10;
      if (/[^A-Za-z0-9]/.test(password)) strength += 10;

      // Bonus for length
      if (password.length > 20) strength += 10;

      strengthBar.style.width = Math.min(strength, 100) + '%';

      if (strength < 30) {
        feedback = 'Weak';
        strengthBar.className = 'strength-bar strength-weak';
        strengthText.className = 'strength-text strength-weak-text';
      } else if (strength < 50) {
        feedback = 'Fair';
        strengthBar.className = 'strength-bar strength-fair';
        strengthText.className = 'strength-text strength-fair-text';
      } else if (strength < 75) {
        feedback = 'Good';
        strengthBar.className = 'strength-bar strength-good';
        strengthText.className = 'strength-text strength-good-text';
      } else {
        feedback = 'Strong';
        strengthBar.className = 'strength-bar strength-strong';
        strengthText.className = 'strength-text strength-strong-text';
      }

      strengthText.textContent = feedback;
    }

    // Update password analysis
    function updateAnalysis(password, charset) {
      const length = password.length;
      const uniqueChars = new Set(password).size;
      const charsetSize = charset.length;

      // Calculate entropy (bits) = log2(charset^length)
      const entropy = Math.log2(Math.pow(charsetSize, length));

      // Estimate crack time (assuming 1 billion passwords/sec)
      const totalCombinations = Math.pow(charsetSize, length);
      const crackSeconds = totalCombinations / 2 / 1000000000;

      document.getElementById('analysisLength').textContent = length;
      document.getElementById('analysisUnique').textContent = uniqueChars;
      document.getElementById('analysisEntropy').textContent = '~' + Math.round(entropy) + ' bits';
      document.getElementById('analysisCrackTime').textContent = formatCrackTime(crackSeconds);
    }

    // Format crack time in human readable format
    function formatCrackTime(seconds) {
      if (seconds < 1) return 'Instant';
      if (seconds < 60) return Math.round(seconds) + ' seconds';
      if (seconds < 3600) return Math.round(seconds / 60) + ' minutes';
      if (seconds < 86400) return Math.round(seconds / 3600) + ' hours';
      if (seconds < 31536000) return Math.round(seconds / 86400) + ' days';
      if (seconds < 3153600000) return Math.round(seconds / 31536000) + ' years';
      return Math.round(seconds / 3153600000) + ' million years';
    }

    // Password visibility toggle
    function togglePasswordVisibility() {
      const type = passwordDisplay.type === 'password' ? 'text' : 'password';
      passwordDisplay.type = type;
    }

    // Copy password
    function copyPassword() {
      navigator.clipboard.writeText(passwordDisplay.value).then(() => {
        showCopyFeedback();
      });
    }

    // Password history
    function addToHistory(password) {
      if (!passwordHistory.includes(password)) {
        passwordHistory.unshift(password);
        if (passwordHistory.length > 20) passwordHistory.pop();
        localStorage.setItem('passwordHistory', JSON.stringify(passwordHistory));
        updateHistoryDisplay();
      }
    }

    function updateHistoryDisplay() {
      if (passwordHistory.length === 0) {
        historyList.innerHTML = '<p style="text-align: center; color: #94a3b8; padding: 20px;">No passwords generated yet</p>';
        return;
      }

      historyList.innerHTML = passwordHistory.map((pwd, index) => `
        <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px; background: #0f172a; border-radius: 6px; margin-bottom: 8px; font-family: 'Courier New', monospace; font-size: 12px;">
          <span style="flex: 1; word-break: break-all;">${pwd}</span>
          <button class="copy-btn" onclick="copyHistoryPassword('${pwd}')" style="margin-left: 10px;">üìã</button>
        </div>
      `).join('');
    }

    function copyHistoryPassword(pwd) {
      navigator.clipboard.writeText(pwd).then(() => {
        showCopyFeedback();
      });
    }

    function clearHistory() {
      if (confirm('Clear all password history?')) {
        passwordHistory = [];
        localStorage.setItem('passwordHistory', JSON.stringify(passwordHistory));
        updateHistoryDisplay();
      }
    }

    // Reset options
    function resetOptions() {
      lengthSlider.value = 16;
      lengthValue.textContent = 16;
      uppercase.checked = true;
      lowercase.checked = true;
      numbers.checked = true;
      symbols.checked = true;
      symbolsInput.value = SYMBOL_CHARS;
      document.getElementById('excludeAmbiguous').checked = false;
      document.getElementById('excludeCharacters').value = '';
      document.getElementById('requireCharacters').value = '';
      document.getElementById('requireAllTypes').checked = true;
      document.getElementById('startsWithLetter').checked = false;
      generatePassword();
    }

    // Batch generator
    function generateBatch() {
      const count = parseInt(document.getElementById('batchCount').value);
      const passwords = [];

      for (let i = 0; i < count; i++) {
        generatePassword();
        passwords.push(passwordDisplay.value);
      }

      batchOutput.value = passwords.join('\n');
    }

    function copyBatchPasswords() {
      navigator.clipboard.writeText(batchOutput.value).then(() => {
        showCopyFeedback();
      });
    }

    function downloadBatchPasswords() {
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(batchOutput.value));
      element.setAttribute('download', 'passwords.txt');
      element.style.display = 'none';
      document.body.appendChild(element);
      element.click();
      document.body.removeChild(element);
    }

    // Download single password
    function downloadPassword() {
      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(passwordDisplay.value));
      element.setAttribute('download', 'password.txt');
      element.style.display = 'none';
      document.body.appendChild(element);
      element.click();
      document.body.removeChild(element);
    }

    // Copy feedback
    function showCopyFeedback() {
      const feedback = document.createElement('div');
      feedback.className = 'copy-feedback';
      feedback.textContent = '‚úì Copied to clipboard!';
      document.body.appendChild(feedback);

      setTimeout(() => {
        feedback.remove();
      }, 2000);
    }
  </script>
</body>
</html>
